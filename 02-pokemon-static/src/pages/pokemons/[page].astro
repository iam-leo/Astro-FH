---
import type { GetStaticPaths } from 'astro';
// Server side only code - build time
import PokemonCard from '../../components/pokemons/PokemonCard.astro';
import type { PokemonListResponse } from '../../interfaces/pokemon-list-results';
import MainLayout from '../../layouts/MainLayout.astro';

const title = 'Pokedex | Home';

export const getStaticPaths = (async ({ paginate }) => {
    const response = await fetch('https://pokeapi.co/api/v2/pokemon?limit=151');

    const { results } = (await response.json()) as PokemonListResponse;

    return paginate(results, { pageSize: 20 });
}) satisfies GetStaticPaths;

const { page } = Astro.props;
---

<MainLayout title={title}>
    <h1 class='text-center text-3xl text-indigo-700 mt-5'>
        Listado de Pokemons
    </h1>
    <ul
        aria-label='Listado de pokemons'
        class='m-5 grid grid-cols-4 gap-3'
    >
        {
            page.data.map((pokemon) => (
                <PokemonCard
                    name={pokemon.name}
                    url={pokemon.url}
                />
            ))
        }
    </ul>

    <section class='flex justify-center items-center gap-x-4 my-10 px-5'>
        <a
            href={page.url.prev}
            class='btn'
        >
            Anteriores
        </a>
        <a
            href={page.url.next}
            class='btn'
        >
            Siguientes</a
        >

        <div class='flex flex-1'></div>
        <span> PÃ¡gina 1 </span>
    </section>
</MainLayout>

<style>
    @reference "tailwindcss";
    .btn {
        @apply px-4 py-2 bg-blue-600 rounded-md;
    }

    .btn:hover {
        @apply bg-blue-700;
    }

    .disabled {
        @apply bg-gray-500 cursor-not-allowed;
    }

    span {
        @apply text-xl font-bold;
    }
</style>
